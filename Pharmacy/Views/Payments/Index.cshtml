@{
    ViewData["Title"] = "Payments";
    Layout = "~/Views/Shared/_layout.cshtml";
}

@section Css{
    <style>
        td {
            padding: 4px 1px 0px 1px !important;
            font-size: 11px !important
        }

            td a {
                margin-left: 5px !important;
            }
    </style>
}
<div class="m-portlet m-portlet--mobile">
    <div class="m-portlet__head" style="background-color : lavender;">
        <div class="m-portlet__head-caption">
            <div class="m-portlet__head-title">
                <h3 class="m-portlet__head-text">

                    <span style="color : lightslategray">فهرس المبيعات في النظام</span><small style="color : gray">عرض وتعديل بيانات المبيعات </small>
                </h3>
            </div>
        </div>
        <div class="m-portlet__head-tools">
            <ul class="m-portlet__nav">
                <li class="m-portlet__nav-item">
                    <a href="~/Payments/Create" title="اضافة" class="PopUp btn-sm btn btn-outline-primary m-btn m-btn--custom m-btn--icon m-btn--pill m-btn--air">
                        <span>
                            <i class="fa fa-plus-square"></i>
                            <span>Add</span>
                        </span>
                    </a>
                </li>
            </ul>
        </div>
    </div>
    <div class="m-portlet__body">

        <!--begin: Search Form -->
        <div class="m-form m-form--label-align-right m--margin-top-10 m--margin-bottom-0">
            <div class="row align-items-center">
                <div class="col-xl-8 order-2 order-xl-1">
                    <div class="form-group m-form__group row align-items-center">
                        <div class="col-md-6">
                            <div class="m-input-icon m-input-icon--left">
                                <input type="text" name="SearchKey" class="form-control m-input m-input--air" placeholder="الاسم ...">
                            </div>
                        </div>
                        <div class="col-md-2">
                            <a class="SearchBtn btn btn-outline-brand m-btn m-btn--icon btn-sm m-btn--icon-only m-btn--custom m-btn--outline-1x m-btn--pill m-btn--air">
                                <i class="fa fa-search"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <table class="table m-table table-bordered m-table--head-separator-primary" id="DataTableId">
            <thead align="center">
                <tr>
                    <th>اسم الصيدلي</th>
                    <th>اسم الدواء</th>
                    <th>الكمية</th>
                    <th>السعر الاجمالي</th>
                    <th>تاريخ الاضافة</th>
                    <th>انشا بواسطة</th>
                    <th width="20%">العمليات</th>
                </tr>
            </thead>
            <tbody align="center"></tbody>
        </table>
    </div>
</div>

@section Scripts{
    <script>
        $(document).on("click", ".SearchBtn", function () {
            BindDataTable();
        });
        BindDataTable();
        function BindDataTable() {
            oTable = $('#DataTableId').dataTable(
                {
                    language: {
                        aria: {
                            sortAscending: ": فعال لترتيب العمود تصاعديا", sortDescending: ": فعال لترتيب العمود تنازليا"
                        }
                        , emptyTable: "لا يوجد بيانات لعرضها", info: "عرض _START_ الى _END_ من _TOTAL_ صف", infoEmpty: "لا يوجد نتائج لعرضها", infoFiltered: "(filtered1 من _MAX_ اجمالي صفوف)", lengthMenu: "_MENU_", search: "بحث", zeroRecords: "لا يوجد نتائج لعرضها",
                        paginate: { sFirst: "الاول", sLast: "الاخير", sNext: "التالي", sPrevious: "السابق" }
                    },

                    "iDisplayLength": 8,
                    "sPaginationType": "full_numbers",
                    "bFilter": false,
                    "bDestroy": true,
                    "bSort": false,
                    "bStateSave": true,
                    "bLengthChange": false,
                    "columnDefs": [{
                        "orderable": false
                    }],
                    //"bSort": false,
                    serverSide: true,
                    columns: [
                        { data: 'emailUser', name: 'emailUser' },
                        { data: 'drugName', name: 'drugName' },
                        { data: 'quntity', name: 'quntity' },
                        { data: 'total', name: 'total' },
                        { data: 'createdAt', name: 'createdAt' },
                        { data: 'createdBy', name: 'createdBy' },
                        {
                            name: 'buttons', "render": function (data, type, row) {
                                return ""
                                    + "<a title='تعديل' href='/Payments/Edit/" + row["id"] + "' class='PopUp btn btn-outline-primary btn-sm m-btn m-btn--icon  m-btn--icon-only m-btn--pill'><i class='flaticon-settings'></i></a>"
                                    + "<a  title='حذف' tname='#DataTableId' href='/Payments/Delete/" + row["id"] + "' class='Confirm  btn btn-outline-danger btn-sm m-btn m-btn--icon  m-btn--icon-only m-btn--pill'><i class='flaticon-delete-1'></i></a>"
                            }
                        }
                    ],
                    ajax: {
                        type: "POST",
                        contentType: "application/json",
                        url: '/Payments/GetDataAjax'
                        ,
                        data: function (d) {
                            d.SearchKey = ($("[name=SearchKey]").val());
                            return JSON.stringify(d);
                        }
                    }
                });
        }
    </script>
}

